@page "/Adding"
@using Models
@using Data
@using Microsoft.AspNetCore.Identity
@using LoginComponent 
@inject NavigationManager NavigationManager

@inject IModel Model;

	<AuthorizeView>
		<Authorized>
			<h3>Add some cool people below...</h3>

			<form>

				<input placeholder="First name" @bind="fName"><br>
				<input placeholder="Last name" @bind="lName"><br>
				<input placeholder="ID" @bind="id"><br>
				<input placeholder="Age" @bind="age"><br>
				<input placeholder="Occupation" @bind="occupation"><br>
				<input placeholder="Eye color" @bind="eyeColor"><br>
				<input placeholder="Hair color" @bind="hairColor"><br>
				<input placeholder="Weight" @bind="weight"><br>
				<input placeholder="Height" @bind="height"><br>
				<input placeholder="Sex" @bind="sex"><br>

				<br>
				<br>
				<button @onclick="AddAdult">Add cool person</button>
			</form>
		</Authorized>
		<NotAuthorized>
			<h3>You're not authorized to view this page... Please log in!</h3>
			<Login />
		</NotAuthorized>

	</AuthorizeView>


	@code {private string fName;
		private string lName;
		private string hairColor;
		private string occupation;
		private string eyeColor;
		private int age;
		private string sex;
		private float weight;
		private int height;
		private int id;

		//[CascadingParameter] protected Task<AuthenticationState> AuthStat { get; set; }

		//protected override async Task OnInitializedAsync()
		//{
		//	await base.OnInitializedAsync();
		//	var user = (await AuthStat).User;
		//	if (!user.Identity.IsAuthenticated)
		//	{
		//		NavigationManager.NavigateTo($"/Login");
		//		// NavigationManager.NavigateTo($"/Login?returnUrl={Uri.EscapeDataString(NavigationManager.Uri)}");
		//	}
		//}

		private void AddAdult()
		{
			Adult newAdult = new Adult { FirstName = fName, LastName = lName, Age = age, EyeColor = eyeColor, HairColor = hairColor, Height = height, Id = id, JobTitle = occupation, Sex = sex, Weight = weight };
			Model.AddAdult(newAdult);



			fName = string.Empty;
			lName = string.Empty;
			hairColor = string.Empty;
			occupation = string.Empty;
			age = 0;
			sex = String.Empty;
			weight = 0;
			height = 0;
			id = 0;

		} }